<!DOCTYPE html>
<html lang="en-US">
<head>
<link rel="stylesheet" type="text/css" href="/style.css"/>
  

  <meta charset="utf-8" />
    <title>Box sample for 3rd party app</title>
    <!-- polyfill.io only loads the polyfills your browser needs -->
    <script src="https://cdn.polyfill.io/v2/polyfill.min.js?features=Promise"></script>
    <!-- Alternatively, use polyfills hosted on the Box CDN
    <script src="https://cdn01.boxcdn.net/polyfills/bluebird/3.5.1/bluebird.min.js"></script>
    -->

    <!-- Latest version of Box Content Preview for en-US locale -->
 <script
  src="https://code.jquery.com/jquery-3.3.1.min.js"
  integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8="
  crossorigin="anonymous"></script>
  
</head>


<script>
 var preview = null;// new Box.Preview();
	var lamdbaURL = 'https://bl2vhdoqzh.execute-api.eu-west-2.amazonaws.com/default/box-tokengenerator';
 	var params = new URLSearchParams(window.location.search);
 	//Client id and secret
 	var clientId='bn2iyg37p78jkowrp0io0nc2ln0be3wt';
  	var clientSecret='C45GViJjUNr3QWvCSXlJAXbbfYBeHyPZ';
   	$(document).ready(function(){
		$.ajax({
         	method : 'get',
          	url: lamdbaURL,
       	 	data: {authCode:params.get('authCode'),fileId:params.get('fileId'),clientId:clientId,clientSecret:clientSecret},
          	crossDomain: true,
         	timeout:120000,
          	dataType:'jsonp',
          	cache: false,
          	beforeSend: function() {
            	//$('#loader').show();
           	},
           	complete: function(){
              //$('#loader').hide();
              //$("#foot").show();
          	},
          	success : function(response){
            	console.log("success:" + JSON.stringify(response));
            	$("#auth").text(params.get('authCode'));
            	$("#token").text(response.token);
            	
            },
          error : function(err){
           console.log(JSON.stringify(err));
            console.log("error:" + err.message);
          }
      });
	});

</script>
<body>
<div id=auth/>
<br/>
<div id=cid/>
<br/>

<div id=token/>
<br/>

</section>
   
</body>
</html>
